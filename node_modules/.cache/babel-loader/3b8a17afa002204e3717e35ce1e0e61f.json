{"remainingRequest":"/Users/will/Downloads/plugiin/node_modules/thread-loader/dist/cjs.js!/Users/will/Downloads/plugiin/node_modules/babel-loader/lib/index.js!/Users/will/Downloads/plugiin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/will/Downloads/plugiin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/will/Downloads/plugiin/src/views/money/MoneyTransfer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/will/Downloads/plugiin/src/views/money/MoneyTransfer.vue","mtime":1574819910000},{"path":"/Users/will/Downloads/plugiin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/will/Downloads/plugiin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/will/Downloads/plugiin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/will/Downloads/plugiin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/will/Downloads/plugiin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/will/Downloads/plugiin/node_modules/@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"/Users/will/Downloads/plugiin/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\"));\n\nvar _vant = require(\"vant\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  data: function data() {\n    return {\n      btnDisabled: true,\n      money: '',\n      balane: 0,\n      moneyError: '',\n      address: '',\n      addressError: '',\n      pwd: '',\n      pwdError: ''\n    };\n  },\n  created: function created() {// document.onkeyup = (e) => {\n    // \tlet key = window.event.keyCode\n    // \tif (key === 13) {\n    // \t\tif (!this.btnDisabled) {\n    // \t\t\tthis.recover()\n    // \t\t}\n    // \t}\n    // }\n  },\n  methods: {\n    // 转账金额验证\n    moneyInput: function moneyInput() {\n      var money = this.money;\n      var msg = '';\n\n      if (!money) {\n        msg = '请输入转账金额';\n        this.btnDisabled = true;\n      } else if (money > this.balane) {\n        msg = '转账金额不可大于当前余额';\n        this.btnDisabled = true;\n      } else {\n        this.btnDisabled = false;\n      }\n\n      this.moneyError = msg;\n    },\n    // 收款地址验证\n    addressInput: function addressInput() {\n      var address = this.address;\n      var msg = '';\n\n      if (!address) {\n        msg = '请输入收款地址';\n        this.btnDisabled = true;\n      } else {\n        this.btnDisabled = false;\n      }\n\n      this.addressError = msg;\n    },\n    // 密码验证\n    pwdInput: function pwdInput() {\n      var pwd = this.pwd;\n      var msg = '';\n\n      if (!pwd) {\n        msg = '请输入密码';\n        this.btnDisabled = true;\n      } else {\n        this.btnDisabled = false;\n      }\n\n      this.pwdError = msg;\n    },\n    // 回退\n    back: function back() {\n      this.$router.go(-1);\n    },\n    // 转账\n    transfer: function () {\n      var _transfer = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var moneyError, addressError, pwdError, keystore, pwd, result, timer;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.addressInput();\n                this.moneyInput();\n                this.pwdInput();\n                moneyError = this.moneyError;\n                addressError = this.addressError;\n                pwdError = this.pwdError;\n\n                if (!(moneyError || addressError || pwdError)) {\n                  _context.next = 8;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", false);\n\n              case 8:\n                _context.prev = 8;\n                // let keystore = JSON.parse(window.localStorage.getItem('keystore'))\n                keystore = {}; // chrome.storage.local.get('keystore', function (result) {\n                // \tkeystore = result.keystore\n                // })\n\n                _context.next = 12;\n                return this.$unit.getStorage('keystore').then(function (v) {\n                  keystore = v;\n                });\n\n              case 12:\n                pwd = this.pwd;\n                result = this.$cwv.keystore.json2KeyPair(keystore, pwd); // const toast = Toast.loading({\n                // \tduration: 0,       // 持续展示 toast\n                // \tforbidClick: true, // 禁用背景点击\n                // \ticon: 'passed',\n                // \tmessage: '转账成功'\n                // })\n\n                (0, _vant.Toast)('转账成功');\n                timer = setInterval(function () {\n                  clearInterval(timer);\n\n                  _vant.Toast.clear();\n                }, 1000);\n                _context.next = 21;\n                break;\n\n              case 18:\n                _context.prev = 18;\n                _context.t0 = _context[\"catch\"](8);\n                this.pwdError = '密码不正确';\n\n              case 21:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[8, 18]]);\n      }));\n\n      function transfer() {\n        return _transfer.apply(this, arguments);\n      }\n\n      return transfer;\n    }()\n  }\n};\nexports.default = _default;",{"version":3,"sources":["MoneyTransfer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div class=\"transfer\">\n\t\t<div class=\"header\">\n\t\t\t<van-icon @click=\"back\" name=\"arrow-left fl\" />\n\t\t\t<span class=\"title\">转账</span>\n\t\t</div>\n\t\t<div class=\"from\">\n\t\t\t<div class=\"from-item\">\n\t\t\t\t<p class=\"from-title\">\n\t\t\t\t\t<span class=\"left\">转账金额</span>\n\t\t\t\t\t<span class=\"balane\">当前余额 {{balane}} SC</span>\n\t\t\t\t</p>\n\t\t\t\t<input type=\"number\" v-model=\"money\" :class=\"{'money-input': true,error: moneyError.length >= 1}\" @input=\"moneyInput\" placeholder=\"请输入转账金额\">\n\t\t\t\t<div class=\"error-msg\">{{moneyError}}</div>\n\t\t\t\t<span class=\"unit\">SC</span>\n\t\t\t</div>\n\t\t\t<div class=\"from-item\">\n\t\t\t\t<p class=\"from-title\">\n\t\t\t\t\t<span class=\"left\">\b收款地址</span>\n\t\t\t\t</p>\n\t\t\t\t<input v-model=\"address\" :class=\"{error: addressError.length >= 1}\" @input=\"addressInput\" placeholder=\"请输入收款地址\">\n\t\t\t\t<div class=\"error-msg\">{{addressError}}</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"from\">\n\t\t\t<div class=\"from-item\">\n\t\t\t\t<p class=\"from-title\">\n\t\t\t\t\t<span class=\"left\">钱包密码</span>\n\t\t\t\t</p>\n\t\t\t\t<input type=\"password\" v-model=\"pwd\" :class=\"{error: pwdError.length >= 1}\" @input=\"pwdInput\" placeholder=\"请输入钱包密码\">\n\t\t\t\t<div class=\"error-msg\">{{pwdError}}</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"button\">\n\t\t\t<button :class=\"{'btn':true,'btn-disabled': btnDisabled}\" @click=\"transfer\" :disabled=\"btnDisabled\">转账</button>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { Toast } from 'vant'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tbtnDisabled: true,\n\t\t\tmoney: '',\n\t\t\tbalane: 0,\n\t\t\tmoneyError: '',\n\t\t\taddress: '',\n\t\t\taddressError: '',\n\t\t\tpwd: '',\n\t\t\tpwdError: ''\n\t\t}\n\t},\n\tcreated() {\n\t\t// document.onkeyup = (e) => {\n\t\t// \tlet key = window.event.keyCode\n\t\t// \tif (key === 13) {\n\t\t// \t\tif (!this.btnDisabled) {\n\t\t// \t\t\tthis.recover()\n\t\t// \t\t}\n\t\t// \t}\n\t\t// }\n\t},\n\tmethods: {\n\t\t// 转账金额验证\n\t\tmoneyInput() {\n\t\t\tlet money = this.money\n\t\t\tlet msg = '';\n\t\t\tif (!money) {\n\t\t\t\tmsg = '请输入转账金额'\n\t\t\t\tthis.btnDisabled = true\n\t\t\t} else if (money > this.balane) {\n\t\t\t\tmsg = '转账金额不可大于当前余额'\n\t\t\t\tthis.btnDisabled = true\n\t\t\t} else {\n\t\t\t\tthis.btnDisabled = false\n\t\t\t}\n\t\t\tthis.moneyError = msg;\n\t\t},\n\t\t// 收款地址验证\n\t\taddressInput() {\n\t\t\tlet address = this.address\n\t\t\tlet msg = '';\n\t\t\tif (!address) {\n\t\t\t\tmsg = '请输入收款地址'\n\t\t\t\tthis.btnDisabled = true\n\t\t\t} else {\n\t\t\t\tthis.btnDisabled = false\n\t\t\t}\n\t\t\tthis.addressError = msg;\n\t\t},\n\t\t// 密码验证\n\t\tpwdInput() {\n\t\t\tlet pwd = this.pwd\n\t\t\tlet msg = '';\n\t\t\tif (!pwd) {\n\t\t\t\tmsg = '请输入密码'\n\t\t\t\tthis.btnDisabled = true\n\t\t\t} else {\n\t\t\t\tthis.btnDisabled = false\n\t\t\t}\n\t\t\tthis.pwdError = msg;\n\t\t},\n\n\t\t// 回退\n\t\tback() {\n\t\t\tthis.$router.go(-1)\n\t\t},\n\t\t// 转账\n\t\tasync transfer() {\n\t\t\tthis.addressInput()\n\t\t\tthis.moneyInput()\n\t\t\tthis.pwdInput()\n\t\t\tlet moneyError = this.moneyError\n\t\t\tlet addressError = this.addressError\n\t\t\tlet pwdError = this.pwdError\n\t\t\tif (moneyError || addressError || pwdError) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\ttry {\n\t\t\t\t// let keystore = JSON.parse(window.localStorage.getItem('keystore'))\n\t\t\t\tlet keystore = {}\n\t\t\t\t// chrome.storage.local.get('keystore', function (result) {\n\t\t\t\t// \tkeystore = result.keystore\n\t\t\t\t// })\n\t\t\t\tawait this.$unit.getStorage('keystore').then((v) => {\n\t\t\t\t\tkeystore = v\n\t\t\t\t})\n\n\t\t\t\tlet pwd = this.pwd\n\t\t\t\tlet result = this.$cwv.keystore.json2KeyPair(keystore, pwd)\n\t\t\t\t// const toast = Toast.loading({\n\t\t\t\t// \tduration: 0,       // 持续展示 toast\n\t\t\t\t// \tforbidClick: true, // 禁用背景点击\n\t\t\t\t// \ticon: 'passed',\n\t\t\t\t// \tmessage: '转账成功'\n\t\t\t\t// })\n\t\t\t\tToast('转账成功')\n\t\t\t\tconst timer = setInterval(() => {\n\t\t\t\t\tclearInterval(timer)\n\t\t\t\t\tToast.clear()\n\t\t\t\t}, 1000)\n\t\t\t} catch (error) {\n\t\t\t\tthis.pwdError = '密码不正确'\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"less\" scoped>\n.transfer {\n\twidth: 100%;\n\theight: 100%;\n\tposition: fixed;\n\tbackground: rgba(0, 0, 0, 0.04);\n\t.header {\n\t\tpadding: 10px 20px;\n\t\tbackground: #fff;\n\t\tfont-size: 16px;\n\t\theight: 44px;\n\t\tline-height: 44px;\n\t\tline-height: 22px;\n\t\ttext-align: center;\n\t\tposition: relative;\n\t\t.van-icon-arrow-left {\n\t\t\tcursor: pointer;\n\t\t\tcolor: #516fea;\n\t\t\tvertical-align: middle;\n\t\t\tposition: absolute;\n\t\t\tleft: 20px;\n\t\t\ttop: 50%;\n\t\t\tmargin-top: -8px;\n\t\t}\n\t\t.title {\n\t\t\tfont-family: PingFangSC-Regular;\n\t\t\tfont-weight: 400;\n\t\t\tcolor: rgba(0, 0, 0, 0.85);\n\t\t\tvertical-align: middle;\n\t\t}\n\t}\n\t.from {\n\t\tmargin-top: 14px;\n\t\tbackground: #fff;\n\t\tpadding: 1px 20px 20px 20px;\n\t\t&-item {\n\t\t\tmargin-top: 24px;\n\t\t\tposition: relative;\n\t\t\theight: 80px;\n\t\t\t.from-title {\n\t\t\t\tfont-size: 14px;\n\t\t\t\tfont-family: PingFangSC-Regular;\n\t\t\t\tfont-weight: 400;\n\t\t\t\tline-height: 20px;\n\t\t\t\theight: 20px;\n\t\t\t\t.left {\n\t\t\t\t\tfloat: left;\n\t\t\t\t\tcolor: rgba(0, 0, 0, 0.85);\n\t\t\t\t}\n\t\t\t\t.balane {\n\t\t\t\t\tfloat: right;\n\t\t\t\t\tcolor: rgba(0, 0, 0, 0.45);\n\t\t\t\t}\n\t\t\t}\n\t\t\tinput {\n\t\t\t\tmargin-top: 10px;\n\t\t\t\theight: 30px;\n\t\t\t\tfont-weight: 400;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tfont-family: PingFangSC-Regular;\n\t\t\t\tline-height: 30px;\n\t\t\t\tpadding: 0;\n\t\t\t\tborder-bottom: 1px solid rgba(0, 0, 0, 0.12);\n\t\t\t}\n\t\t\t.money-input {\n\t\t\t\tfont-size: 18px;\n\t\t\t}\n\t\t\t.unit {\n\t\t\t\tposition: absolute;\n\t\t\t\tright: 0;\n\t\t\t\ttop: 50%;\n\t\t\t\tfont-size: 18px;\n\t\t\t\tmargin-top: -4px;\n\t\t\t\t// transform: translateY(-46%);\n\t\t\t}\n\t\t\tinput.error {\n\t\t\t\tborder-color: rgba(246, 34, 46, 1);\n\t\t\t}\n\t\t\t.error-msg {\n\t\t\t\ttext-align: left;\n\t\t\t\tfont-size: 12px;\n\t\t\t\tfont-family: PingFangSC-Regular;\n\t\t\t\tfont-weight: 400;\n\t\t\t\tcolor: rgba(246, 34, 46, 1);\n\t\t\t\tline-height: 18px;\n\t\t\t}\n\t\t}\n\t}\n\t.button {\n\t\ttext-align: center;\n\t\tmargin-top: 60px;\n\t\t.btn {\n\t\t\twidth: 283px;\n\t\t\theight: 48px;\n\t\t\tbackground: rgba(51, 76, 169, 1);\n\t\t\tborder-radius: 4px;\n\t\t\tborder: 1px solid rgba(51, 76, 169, 1);\n\t\t\tfont-size: 13px;\n\t\t\tfont-family: PingFangSC-Medium;\n\t\t\tfont-weight: 500;\n\t\t\tcolor: rgba(255, 255, 255, 1);\n\t\t}\n\t\t.btn-disabled {\n\t\t\tbackground: rgba(174, 184, 221, 1);\n\t\t\tcolor: rgba(255, 255, 255, 1);\n\t\t\tborder: 1px solid rgba(174, 184, 221, 1);\n\t\t}\n\t}\n}\n</style>\n"],"sourceRoot":"src/views/money"}]}