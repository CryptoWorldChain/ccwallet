{"remainingRequest":"/Users/will/Documents/finchain/2020/extension/node_modules/thread-loader/dist/cjs.js!/Users/will/Documents/finchain/2020/extension/node_modules/babel-loader/lib/index.js!/Users/will/Documents/finchain/2020/extension/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/will/Documents/finchain/2020/extension/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/will/Documents/finchain/2020/extension/src/views/login/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/will/Documents/finchain/2020/extension/src/views/login/Login.vue","mtime":1578710296777},{"path":"/Users/will/Documents/finchain/2020/extension/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/will/Documents/finchain/2020/extension/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/will/Documents/finchain/2020/extension/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/will/Documents/finchain/2020/extension/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/will/Documents/finchain/2020/extension/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/will/Documents/finchain/2020/extension/node_modules/@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"/Users/will/Documents/finchain/2020/extension/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  data: function data() {\n    return {\n      pwd: '',\n      pwdError: '',\n      btnDisabled: true\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    document.onkeyup = function (e) {\n      var key = window.event.keyCode;\n\n      if (key === 13) {\n        _this.login();\n      }\n    };\n  },\n  mounted: function mounted() {\n    var inputPwd = document.getElementById('pwd');\n\n    if (inputPwd && typeof inputPwd.focus == 'function') {\n      inputPwd.focus();\n    }\n  },\n  methods: {\n    // 密码验证\n    pwdInput: function pwdInput() {\n      var pwd = this.pwd;\n      var msg = '';\n\n      if (!pwd) {\n        msg = '请输入密码';\n        this.btnDisabled = true;\n      } else {\n        this.btnDisabled = false;\n      }\n\n      this.pwdError = msg;\n    },\n    login: function () {\n      var _login = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var keystore, pwd, result, background;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                // TODO: 插件开启\n                keystore = {};\n                _context.next = 4;\n                return this.$unit.getStorage('keystore').then(function (v) {\n                  keystore = v;\n                });\n\n              case 4:\n                // FIXME: 本地开启\n                // let keystore = JSON.parse(window.localStorage.getItem('keystore'))\n                pwd = this.pwd;\n                result = this.$cwv.keystore.json2KeyPair(keystore, pwd);\n                console.log('resultresultresult,,,,,,>>>>>>', pwd, keystore, result);\n                background = chrome.extension.getBackgroundPage();\n                console.log('signJson', background.signJson()); // if (background.signState().length) {\n\n                if (background.signJson() != null) {\n                  this.$router.replace({\n                    path: '/signature'\n                  });\n                } else {\n                  // 登陆成功 跳转到钱包主页\n                  this.$router.push({\n                    name: 'money-bag'\n                  });\n                } // TODO: 插件开启\n\n\n                chrome.storage.local.set({\n                  state: 'WARN'\n                }, function () {});\n                chrome.extension.getBackgroundPage().GlobalState = 'OPEN'; // FIXME: 本地开启\n                // window.localStorage.setItem('state', 'WARN')\n\n                _context.next = 18;\n                break;\n\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n                this.pwdError = '密码不正确';\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 14]]);\n      }));\n\n      function login() {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }(),\n    recover: function recover() {\n      this.$router.push({\n        name: 'recover'\n      });\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eA2CA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,GAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,WAAA,EAAA;AAHA,KAAA;AAKA,GAPA;AAQA,EAAA,OARA,qBAQA;AAAA;;AACA,IAAA,QAAA,CAAA,OAAA,GAAA,UAAA,CAAA,EAAA;AACA,UAAA,GAAA,GAAA,MAAA,CAAA,KAAA,CAAA,OAAA;;AACA,UAAA,GAAA,KAAA,EAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA;AACA;AACA,KALA;AAMA,GAfA;AAgBA,EAAA,OAhBA,qBAgBA;AACA,QAAA,QAAA,GAAA,QAAA,CAAA,cAAA,CAAA,KAAA,CAAA;;AACA,QAAA,QAAA,IAAA,OAAA,QAAA,CAAA,KAAA,IAAA,UAAA,EAAA;AACA,MAAA,QAAA,CAAA,KAAA;AACA;AACA,GArBA;AAsBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,QAFA,sBAEA;AACA,UAAA,GAAA,GAAA,KAAA,GAAA;AACA,UAAA,GAAA,GAAA,EAAA;;AACA,UAAA,CAAA,GAAA,EAAA;AACA,QAAA,GAAA,GAAA,OAAA;AACA,aAAA,WAAA,GAAA,IAAA;AACA,OAHA,MAGA;AACA,aAAA,WAAA,GAAA,KAAA;AACA;;AACA,WAAA,QAAA,GAAA,GAAA;AACA,KAZA;AAaA,IAAA,KAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA,gBAAA,QAhBA,GAgBA,EAhBA;AAAA;AAAA,uBAiBA,KAAA,KAAA,CAAA,UAAA,CAAA,UAAA,EAAA,IAAA,CAAA,UAAA,CAAA,EAAA;AACA,kBAAA,QAAA,GAAA,CAAA;AACA,iBAFA,CAjBA;;AAAA;AAqBA;AACA;AAEA,gBAAA,GAxBA,GAwBA,KAAA,GAxBA;AAyBA,gBAAA,MAzBA,GAyBA,KAAA,IAAA,CAAA,QAAA,CAAA,YAAA,CAAA,QAAA,EAAA,GAAA,CAzBA;AA0BA,gBAAA,OAAA,CAAA,GAAA,CAAA,gCAAA,EAAA,GAAA,EAAA,QAAA,EAAA,MAAA;AACA,gBAAA,UA3BA,GA2BA,MAAA,CAAA,SAAA,CAAA,iBAAA,EA3BA;AA4BA,gBAAA,OAAA,CAAA,GAAA,CAAA,UAAA,EAAA,UAAA,CAAA,QAAA,EAAA,EA5BA,CA6BA;;AACA,oBAAA,UAAA,CAAA,QAAA,MAAA,IAAA,EAAA;AACA,uBAAA,OAAA,CAAA,OAAA,CAAA;AACA,oBAAA,IAAA,EAAA;AADA,mBAAA;AAGA,iBAJA,MAIA;AACA;AACA,uBAAA,OAAA,CAAA,IAAA,CAAA;AACA,oBAAA,IAAA,EAAA;AADA,mBAAA;AAGA,iBAvCA,CA0CA;;;AACA,gBAAA,MAAA,CAAA,OAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AAAA,kBAAA,KAAA,EAAA;AAAA,iBAAA,EAAA,YAAA,CAAA,CAAA;AACA,gBAAA,MAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,WAAA,GAAA,MAAA,CA5CA,CA6CA;AACA;;AA9CA;AAAA;;AAAA;AAAA;AAAA;AAgDA,gBAAA,OAAA,CAAA,GAAA;AACA,qBAAA,QAAA,GAAA,OAAA;;AAjDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAoDA,IAAA,OApDA,qBAoDA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA;AADA,OAAA;AAGA;AAxDA;AAtBA,C","sourcesContent":["<template>\n\t<!-- <div class=\"login wrapper\">\n    <div class=\"login-inner\">\n      <div class=\"logo\">\n        <img src=\"../../assets/cwv_logo_horizontal.png\" alt=\"\">\n      </div>\n      <div class=\"input-password\">\n        <input v-model=\"password\" :class=\"{error: err}\" @keypress.enter=\"login\" autocomplete=\"off\" type=\"password\" @input=\"inputpass\" placeholder=\"密码\">\n      </div>\n      <div class=\"pass-error\">{{err}}</div>\n      <div class=\"sign-in\">\n        <button class=\"btn btn-block\" @click=\"login\">登录</button>\n      </div>\n      <div class=\"footer-tips\" @click=\"restore\">\n        <div class=\"restore\">使用助记词还原</div>\n        <div class=\"import-account\">Import using account seed phrase</div>\n      </div>\n    </div>\n  </div> -->\n\t<div class=\"login\">\n\t\t<!-- <div class=\"header\">\n\t\t\t<van-icon @click=\"back\" name=\"arrow-left\" />\n\t\t</div> -->\n\t\t<div class=\"title\">\n\t\t\t<h2>登录</h2>\n\t\t</div>\n\t\t<div class=\"from\">\n\t\t\t<div class=\"from-item\">\n\t\t\t\t<input type=\"password\" id=\"pwd\" v-model=\"pwd\" :class=\"{error: pwdError.length >= 1}\" @input=\"pwdInput\" placeholder=\"请输入密码\" maxlength=\"24\">\n\t\t\t\t<div class=\"error-msg\">{{pwdError}}</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"button\">\n\t\t\t<button :class=\"{'btn':true,'btn-disabled': btnDisabled}\" @click=\"login\" :disabled=\"btnDisabled\">登录</button>\n\t\t</div>\n\t\t<div class=\"recover\" @click=\"recover\">\n\t\t\t<p>使用助记词还原</p>\n\t\t\t<p>Import using account seed phrase</p>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tpwd: '',\n\t\t\tpwdError: '',\n\t\t\tbtnDisabled: true\n\t\t}\n\t},\n\tcreated() {\n\t\tdocument.onkeyup = (e) => {\n\t\t\tlet key = window.event.keyCode\n\t\t\tif (key === 13) {\n\t\t\t\tthis.login()\n\t\t\t}\n\t\t}\n\t},\n\tmounted() {\n    var inputPwd = document.getElementById('pwd')\n    if (inputPwd && typeof inputPwd.focus == 'function') {\n      inputPwd.focus()\n    }\n\t},\n\tmethods: {\n\t\t// 密码验证\n\t\tpwdInput() {\n\t\t\tlet pwd = this.pwd\n\t\t\tlet msg = '';\n\t\t\tif (!pwd) {\n\t\t\t\tmsg = '请输入密码'\n\t\t\t\tthis.btnDisabled = true\n\t\t\t} else {\n\t\t\t\tthis.btnDisabled = false\n\t\t\t}\n\t\t\tthis.pwdError = msg;\n\t\t},\n\t\tasync login() {\n\t\t\ttry {\n\t\t\t\t// TODO: 插件开启\n\t\t\t\tlet keystore = {}\n\t\t\t\tawait this.$unit.getStorage('keystore').then((v) => {\n\t\t\t\t\tkeystore = v\n\t\t\t\t})\n\n\t\t\t\t// FIXME: 本地开启\n\t\t\t\t// let keystore = JSON.parse(window.localStorage.getItem('keystore'))\n\n\t\t\t\tlet pwd = this.pwd\n\t\t\t\tlet result = this.$cwv.keystore.json2KeyPair(keystore, pwd)\n        console.log('resultresultresult,,,,,,>>>>>>',pwd,keystore,result)\n\t\t\t\tlet background = chrome.extension.getBackgroundPage()\n\t\t\t\tconsole.log('signJson', background.signJson())\n\t\t\t\t// if (background.signState().length) {\n\t\t\t\tif (background.signJson() != null) {\n\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\tpath: '/signature'\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\t// 登陆成功 跳转到钱包主页\n\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\tname: 'money-bag'\n\t\t\t\t\t})\n\t\t\t\t}\n\n\n\t\t\t\t// TODO: 插件开启\n\t\t\t\tchrome.storage.local.set({ state: 'WARN' }, function () { })\n\t\t\t\tchrome.extension.getBackgroundPage().GlobalState = 'OPEN'\n\t\t\t\t// FIXME: 本地开启\n\t\t\t\t// window.localStorage.setItem('state', 'WARN')\n\t\t\t} catch (error) {\n        console.log(error)\n\t\t\t\tthis.pwdError = '密码不正确'\n\t\t\t}\n\t\t},\n\t\trecover() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'recover'\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"less\" scoped>\n.login {\n\twidth: 100%;\n\theight: 100%;\n\tposition: fixed;\n\tpadding: 20px;\n\t.title {\n\t\t// margin-top: 35px;\n\t\th2 {\n\t\t\tfont-size: 18px;\n\t\t\tfont-family: PingFangSC-Medium;\n\t\t\tfont-weight: 500;\n\t\t\tcolor: rgba(0, 0, 0, 0.85);\n\t\t\tline-height: 24px;\n\t\t\ttext-align: center;\n\t\t\tmargin-top: 40px;\n\t\t}\n\t\tp {\n\t\t\tfont-size: 14px;\n\t\t\tfont-family: PingFangSC-Light;\n\t\t\tfont-weight: 300;\n\t\t\tcolor: rgba(0, 0, 0, 0.65);\n\t\t\tline-height: 20px;\n\t\t\tmargin-top: 6px;\n\t\t}\n\t}\n\t.from {\n\t\tmargin-top: 160px;\n\t\t&-item {\n\t\t\tmargin-top: 24px;\n\t\t\theight: 34px;\n\t\t\tinput {\n\t\t\t\tfont-size: 14px;\n\t\t\t\theight: 100%;\n\t\t\t\tfont-family: PingFangSC-Light;\n\t\t\t\tfont-weight: 400;\n\t\t\t\tcolor: rgba(0, 0, 0, 0.85);\n\t\t\t\tline-height: 20px;\n\t\t\t\tpadding: 0;\n\t\t\t\tborder-bottom: 1px solid rgba(0, 0, 0, 0.12);\n\t\t\t}\n\t\t\tinput.error {\n\t\t\t\tborder-color: rgba(246, 34, 46, 1);\n\t\t\t}\n\t\t\t.error-msg {\n\t\t\t\tfont-size: 12px;\n\t\t\t\tfont-family: PingFangSC-Regular;\n\t\t\t\tfont-weight: 400;\n\t\t\t\tcolor: rgba(246, 34, 46, 1);\n\t\t\t\tline-height: 18px;\n\t\t\t}\n\t\t}\n\t}\n\t.button {\n\t\ttext-align: center;\n\t\tmargin-top: 40px;\n\t\t.btn {\n\t\t\twidth: 283px;\n\t\t\theight: 48px;\n\t\t\tbackground: rgba(51, 76, 169, 1);\n\t\t\tborder-radius: 4px;\n\t\t\tborder: 1px solid rgba(51, 76, 169, 1);\n\t\t\tfont-size: 13px;\n\t\t\tfont-family: PingFangSC-Medium;\n\t\t\tfont-weight: 500;\n\t\t\tcolor: rgba(255, 255, 255, 1);\n\t\t}\n\t\t.btn-disabled {\n\t\t\tbackground: rgba(174, 184, 221, 1);\n\t\t\tcolor: rgba(255, 255, 255, 1);\n\t\t\tborder: 1px solid rgba(174, 184, 221, 1);\n\t\t}\n\t}\n\t.recover {\n\t\tmargin-top: 20px;\n\t\ttext-align: left;\n\t\tfont-size: 12px;\n\t\tfont-family: PingFangSC-Light;\n\t\tfont-weight: 300;\n\t\tcolor: rgba(81, 111, 234, 1);\n\t\tline-height: 19px;\n\t\tp {\n\t\t\t&:first-child {\n\t\t\t\tcolor: rgba(0, 0, 0, 0.65);\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n"],"sourceRoot":"src/views/login"}]}